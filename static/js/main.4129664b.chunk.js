(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{16:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(9),o=n.n(r),s=(n(16),n(8)),i=n(3),l="https://pixabay.com/api/",u="22569115-02a432c6c1c62bbb3a59801b7",j=n(4),b=n(11),d=n(1),h=function(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(i.a)(n,2),r=a[0],o=a[1],s=function(e){e.preventDefault(),""!==r.trim()?(t(r),o("")):j.b.error("empty field",{icon:Object(d.jsx)(b.a,{style:{fill:"#3f51b5"}})},{style:{backgroundColor:"#e3d120f2"}})};return Object(d.jsx)("header",{className:"Searchbar",children:Object(d.jsxs)("form",{className:"SearchForm",onSubmit:s,children:[Object(d.jsx)("button",{type:"submit",className:"SearchForm-button",onClick:s,children:Object(d.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(d.jsx)("input",{value:r,onChange:function(e){o(""),o(e.currentTarget.value.toLowerCase())},className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},m=n(41),O=function(e){var t=e.id,n=e.item,c=e.onClick,a=n.webformatURL,r=n.tag;return Object(d.jsx)("li",{className:"ImageGalleryItem",children:Object(d.jsx)("img",{id:t,src:a,alt:r,onClick:c,className:"ImageGalleryItem-image"})})},f=function(e){var t=e.searchResult,n=e.onSelect;return Object(d.jsx)("section",{children:Object(d.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=Object(m.a)();return Object(d.jsx)(O,{item:e,onClick:function(){return n(e)}},t)}))})})},g=function(e){var t=e.onBtnClick;return Object(d.jsx)("div",{className:"btn_wrapper",children:Object(d.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})},p=function(e){var t=e.src,n=e.tag,a=e.onClose;Object(c.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&a()};return Object(d.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&a()},children:Object(d.jsx)("div",{className:"Modal",children:Object(d.jsx)("img",{src:t,alt:n})})})},v=n(10),x=n.n(v),S=(n(38),function(){var e=Object(c.useState)("idle"),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(1),o=Object(i.a)(r,2),b=o[0],m=o[1],O=Object(c.useState)(""),v=Object(i.a)(O,2),S=v[0],w=v[1],k=Object(c.useState)([]),y=Object(i.a)(k,2),C=y[0],N=y[1],F=Object(c.useState)(null),L=Object(i.a)(F,2),E=L[0],I=L[1],T=Object(c.useState)(null),B=Object(i.a)(T,2),R=B[0],_=B[1],G=Object(c.useState)(null),P=Object(i.a)(G,2),D=P[0],H=P[1];Object(c.useEffect)((function(){""!==S&&(a("pending"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("".concat(l,"?q=").concat(e,"&page=").concat(t,"&key=").concat(u,"&image_type=photo&orientation=horizontal&per_page=").concat(12))}(S,b).then((function(e){return e.ok?e.json():(j.b.error("something went wrong"),Promise.reject(new Error("search '".concat(S,"' returned with error"))))})).then((function(e){var t=e.hits,n=e.totalHits;return 1===b&&0!==t.length&&""!==S?(j.b.success("".concat(n," images found")),N(t),void a("resolved")):b>1&&0!==t.length?(j.b.success("more images found"),N((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))})),a("resolved"),void J()):(j.b.error("no images"),N([]),w(""),m(1),void a("idle"))})).catch((function(e){I(e),a("rejected")})))}),[S,b]);var J=function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},M=C.length>11&&"idle"!==n;return Object(d.jsxs)("div",{children:[Object(d.jsx)(h,{onSubmit:function(e){w(e),m(1)}}),Object(d.jsx)(j.a,{position:"top-right"}),"pending"===n&&Object(d.jsx)("div",{className:"loader_wrapper",children:Object(d.jsx)(x.a,{type:"TailSpin",color:"#3f51b5",height:60,width:60,className:"Loader"})}),"rejected"===n&&Object(d.jsx)("h2",{className:"error",children:E.message}),"resolved"===n&&Object(d.jsxs)("div",{children:[Object(d.jsx)(f,{searchResult:C,onSelect:function(e){_(e.largeImageURL),H(e.tags)}}),M&&Object(d.jsx)(g,{onBtnClick:function(){0!==C.length&&m((function(e){return e+1}))}}),R&&Object(d.jsx)(p,{src:R,tag:D,onClose:function(){_(null)}})]})]})}),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root")),w()}},[[39,1,2]]]);
//# sourceMappingURL=main.4129664b.chunk.js.map